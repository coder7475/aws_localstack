# **Day 2 – Learning Plan: Amazon S3 Basics**

### **Goal:**

Learn the basics of **Amazon S3 (Simple Storage Service)** by practicing bucket operations, file uploads, and downloads with LocalStack.

---

### **Tasks / Jobs for Day 2**

1. **Start LocalStack (if not running)**

```bash
docker compose up -d
```

2. **Create an S3 Bucket**

```bash
aws --endpoint-url=http://localhost:4566 s3 mb s3://my-first-bucket --profile localstack
```

3. **List Buckets**

```bash
aws --endpoint-url=http://localhost:4566 s3 ls --profile localstack
```

4. **Upload a File**

```bash
echo "Hello AWS with LocalStack!" > test.txt
aws --endpoint-url=http://localhost:4566 s3 cp test.txt s3://my-first-bucket/ --profile localstack
```

5. **List Objects in the Bucket**

```bash
aws --endpoint-url=http://localhost:4566 s3 ls s3://my-first-bucket --profile localstack
```

6. **Download the File Back**

```bash
aws --endpoint-url=http://localhost:4566 s3 cp s3://my-first-bucket/test.txt ./downloaded.txt --profile localstack
cat downloaded.txt
```

7. **Delete the Object**

```bash
aws --endpoint-url=http://localhost:4566 s3 rm s3://my-first-bucket/test.txt --profile localstack
```

8. **Remove the Bucket**

```bash
aws --endpoint-url=http://localhost:4566 s3 rb s3://my-first-bucket --profile localstack
```

---

### **Learning Outcomes**

- Understand S3 buckets and objects.
- Practice creating, uploading, downloading, and deleting files.
- Get comfortable using AWS CLI with LocalStack for S3.

## Learn More

- https://medium.com/edureka/s3-aws-amazon-simple-storage-service-aa71c664b465

## **Day 3 – Steps**

### **1. Start LocalStack**

Make sure LocalStack is running (via Docker or `localstack` CLI).

```bash
docker compose up  -d
```

Check status:

```bash
docker compose logs -f localstack
```

---

### **2. Create an S3 Bucket**

```bash
aws --endpoint-url=http://localhost:4566 s3 mb s3://my-versioned-bucket
```

---

### **3. Enable Versioning**

```bash
aws --endpoint-url=http://localhost:4566 s3api put-bucket-versioning \
  --bucket my-versioned-bucket \
  --versioning-configuration Status=Enabled
```

Verify:

```bash
aws --endpoint-url=http://localhost:4566 s3api get-bucket-versioning --bucket my-versioned-bucket
```

---

### **4. Upload Multiple Versions of a File**

```bash
echo "First version" > file.txt
aws --endpoint-url=http://localhost:4566 s3 cp file.txt s3://my-versioned-bucket/file.txt

echo "Second version" > file.txt
aws --endpoint-url=http://localhost:4566 s3 cp file.txt s3://my-versioned-bucket/file.txt
```

---

### **5. List Object Versions**

```bash
aws --endpoint-url=http://localhost:4566 s3api list-object-versions --bucket my-versioned-bucket
```

You’ll see multiple versions of `file.txt` with different `VersionId`s.

---

### **6. Retrieve a Specific Version**

```bash
aws --endpoint-url=http://localhost:4566 s3api get-object \
  --bucket my-versioned-bucket \
  --key file.txt \
  --version-id <VERSION_ID> output.txt
```

---

### **7. Add a Lifecycle Policy**

Create a JSON file `lifecycle.json`:

```json
{
  "Rules": [
    {
      "ID": "ExpireOldVersions",
      "Status": "Enabled",
      "NoncurrentVersionExpiration": {
        "NoncurrentDays": 30
      }
    }
  ]
}
```

Apply it:

```bash
aws --endpoint-url=http://localhost:4566 s3api put-bucket-lifecycle-configuration \
  --bucket my-versioned-bucket \
  --lifecycle-configuration file://lifecycle.json
```

Verify:

```bash
aws --endpoint-url=http://localhost:4566 s3api get-bucket-lifecycle-configuration --bucket my-versioned-bucket
```

---
